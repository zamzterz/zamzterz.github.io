<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2022-02-10T21:27:43+01:00</updated><id>/feed.xml</id><title type="html">Samuel Gulliksson</title><entry><title type="html">Transcendence: Behind the scenes</title><link href="/tech/2022/02/10/transcendence.html" rel="alternate" type="text/html" title="Transcendence: Behind the scenes" /><published>2022-02-10T00:00:00+01:00</published><updated>2022-02-10T00:00:00+01:00</updated><id>/tech/2022/02/10/transcendence</id><content type="html" xml:base="/tech/2022/02/10/transcendence.html">&lt;p&gt;The &lt;a href=&quot;/art/2022/02/01/transcendence.html&quot;&gt;‚ÄúTranscendence‚Äù project&lt;/a&gt;
was an exploration of applying technology to personal data in the form of face portrait images and recorded voice samples.
This post describes some of the tech used to build it.&lt;/p&gt;

&lt;h2 id=&quot;data-analysis&quot;&gt;Data analysis&lt;/h2&gt;
&lt;p&gt;The two different data sets ‚Äî 1 set of images, 1 set of audio recordings ‚Äî was processed using two libraries:
&lt;a href=&quot;https://github.com/justadudewhohacks/face-api.js/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face-api.js&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://github.com/peterkhayes/pitchfinder&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pitchfinder&lt;/code&gt;&lt;/a&gt; respectively.&lt;/p&gt;

&lt;p&gt;Turns out both operations could take noticeable time to complete (on the order of tens of seconds), given large enough input sizes.
In Chrome and Firefox this was not noticeable, but in Safari (as usual‚Ä¶) the UI would freeze and the pretty spinning loader would not actually be shown.
(Presumably because it &lt;a href=&quot;https://stackoverflow.com/a/66165276&quot;&gt;doesn‚Äôt repaint while being busy&lt;/a&gt; with the long running task?)&lt;/p&gt;

&lt;p&gt;To get around this I turned to &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API&quot;&gt;Web Workers&lt;/a&gt;,
trying to shift all that heavy computing out of the main thread.
Everything was a smooth ride for the audio processing.
Not so much for the face detection ‚Äî
getting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face-api.js&lt;/code&gt; to work in a Web Worker seemed to be an impossible task (or at least too time consuming for this simple proof-of-concept)
despite &lt;a href=&quot;https://github.com/justadudewhohacks/face-api.js/issues/47&quot;&gt;claims of working examples&lt;/a&gt;.
However, the basic (blocking) implementation is shown below.&lt;/p&gt;

&lt;p&gt;Supporting multi upload, a set of images can be analysed to detect any contained face and extract information about the identified features of the face (face landmarks), estimated age and gender:&lt;/p&gt;

&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2022-02-10-transcendence/image-analysis&amp;amp;tab=js&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;350&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Similarly, a pitch detection algorithm was applied to the audio recordings, which samples the audio data and returns the detected frequencies:&lt;/p&gt;

&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2022-02-10-transcendence/audio-analysis&amp;amp;tab=js&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;a href=&quot;/code-examples/2022-02-10-transcendence/audio-analysis/frequencyDetector.js&quot;&gt;Web Worker code&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note:&lt;/strong&gt; The results are printed in the Javascript console.&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;data-visualization&quot;&gt;Data visualization&lt;/h2&gt;

&lt;p&gt;The extracted data was visualized using &lt;a href=&quot;https://www.chartjs.org/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Chart.js&lt;/code&gt;&lt;/a&gt;.
Some of the noteworthy features utilized:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Using a &lt;a href=&quot;(https://www.chartjs.org/docs/3.7.0/samples/advanced/linear-gradient.html)&quot;&gt;gradient as line color&lt;/a&gt; (used for visualizing the binary gender classifications).&lt;/li&gt;
  &lt;li&gt;The &lt;a href=&quot;https://www.chartjs.org/chartjs-plugin-annotation/latest/&quot;&gt;annotation plugin&lt;/a&gt; for drawing horizontal lines and boxes (used for example to show the average male and female voice ranges).&lt;/li&gt;
  &lt;li&gt;The &lt;a href=&quot;https://github.com/sgratzl/chartjs-chart-boxplot&quot;&gt;boxplot plugin&lt;/a&gt; for showing the five-number summary for a set of values (used for visualizing the voice frequency data).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;text-to-speech&quot;&gt;Text-to-speech&lt;/h2&gt;

&lt;p&gt;The poem
&lt;a href=&quot;/art/transcendence/data/not_my_voice.mp3&quot;&gt;‚ÄúThis is not my voice‚Äù&lt;/a&gt;
was rendered using &lt;a href=&quot;https://azure.microsoft.com/en-us/services/cognitive-services/text-to-speech/#overview&quot;&gt;Azure Text to Speech&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It has a nice variety of voices and offers a &lt;a href=&quot;https://speech.microsoft.com/audiocontentcreation&quot;&gt;graphical web interface&lt;/a&gt;
for editing the audio content (while also supporting raw &lt;a href=&quot;https://en.wikipedia.org/wiki/Speech_Synthesis_Markup_Language&quot;&gt;SSML&lt;/a&gt;).&lt;/p&gt;</content><author><name>Samuel Gulliksson</name></author><category term="tech" /><summary type="html">The ‚ÄúTranscendence‚Äù project was an exploration of applying technology to personal data in the form of face portrait images and recorded voice samples. This post describes some of the tech used to build it.</summary></entry><entry><title type="html">Transcendence: A Visionary Truth</title><link href="/art/2022/02/01/transcendence.html" rel="alternate" type="text/html" title="Transcendence: A Visionary Truth" /><published>2022-02-01T00:00:00+01:00</published><updated>2022-02-01T00:00:00+01:00</updated><id>/art/2022/02/01/transcendence</id><content type="html" xml:base="/art/2022/02/01/transcendence.html">&lt;p&gt;&lt;em&gt;Who and what are you when seen and rendered by a machine?&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Machines can be trained to see, at least in the sense that they can detect objects in images and classify them.
A behavior not very unlike the very human reaction of instinctively assigning rigid labels to everything we sense.
And despite their crudeness (which often recreates prevalent prejudices and biases),
this ‚Äúmachine vision‚Äù, if you will, can provide a perspective on the self through the mechanical processing of data.
But what truth can lie in such simplistic classifications from a machine?&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;a href=&quot;/art/transcendence&quot;&gt;‚ÄúTranscendence: A Visionary Truth‚Äù&lt;/a&gt;
is an illustrated text piece exploring and reflecting on what data can be extracted from a digitally documented transition process.
It also shows the empowering possibilities of recreating your perceived persona through technology ‚Äî
using synthesized speech and animation ‚Äî freeing the self from body and language.&lt;/em&gt;&lt;/p&gt;

&lt;style&gt;
    ul {
        margin-top: 0;
    }

    ul li {
        margin-bottom: 0;
    }

    .small-text {
        font-size: small;
    }
&lt;/style&gt;

&lt;div class=&quot;small-text&quot;&gt;
    Source data:
    &lt;ul&gt;
    &lt;li&gt;116 weekly portrait images of my face without glasses captured with mobile camera.&lt;/li&gt;
    &lt;li&gt;58 recurring (weekly and later monthly) voice recordings captured on mobile phone.&lt;/li&gt;
    &lt;/ul&gt;

    A description of the technology used to built this can be found &lt;a href=&quot;/tech/2022/02/10/transcendence.html&quot;&gt;here&lt;/a&gt;.
&lt;/div&gt;</content><author><name>Samuel Gulliksson</name></author><category term="art" /><summary type="html">Who and what are you when seen and rendered by a machine?</summary></entry><entry><title type="html">Droppar landar</title><link href="/text/2022/01/21/droppar-landar.html" rel="alternate" type="text/html" title="Droppar landar" /><published>2022-01-21T00:00:00+01:00</published><updated>2022-01-21T00:00:00+01:00</updated><id>/text/2022/01/21/droppar-landar</id><content type="html" xml:base="/text/2022/01/21/droppar-landar.html">&lt;p&gt;Droppar landar &lt;br /&gt;
i redan bl√∂t jord. &lt;br /&gt;
En ot√∂rst &lt;br /&gt;
f√∂dd av tv√•nget &lt;br /&gt;
i regnets hammare.&lt;/p&gt;

&lt;p&gt;Ingen s√§ger stopp &lt;br /&gt;
det r√§cker &lt;br /&gt;
f√∂r de √∂versv√§mmade &lt;br /&gt;
diken som drunknar. &lt;br /&gt;
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†Alla v√§ntar p√• v√•ren.&lt;/p&gt;</content><author><name>Samuel Gulliksson</name></author><category term="text" /><summary type="html">Droppar landar i redan bl√∂t jord. En ot√∂rst f√∂dd av tv√•nget i regnets hammare.</summary></entry><entry><title type="html">i det inre landet</title><link href="/text/2022/01/07/i-det-inre-landet.html" rel="alternate" type="text/html" title="i det inre landet" /><published>2022-01-07T00:00:00+01:00</published><updated>2022-01-07T00:00:00+01:00</updated><id>/text/2022/01/07/i-det-inre-landet</id><content type="html" xml:base="/text/2022/01/07/i-det-inre-landet.html">&lt;p&gt;i det inre landet &lt;br /&gt;
flyter √§lven f√∂rbi &lt;br /&gt;
det klara vattnet&lt;/p&gt;

&lt;p&gt;l√§mnar mig kall &lt;br /&gt;
med sk√§lvande t√§nder &lt;br /&gt;
frusna h√§nder&lt;/p&gt;

&lt;p&gt;vinkar vi skimrande &lt;br /&gt;
adj√∂ till modern &lt;br /&gt;
som l√§mnat oss h√§r&lt;/p&gt;</content><author><name>Samuel Gulliksson</name></author><category term="text" /><summary type="html">i det inre landet flyter √§lven f√∂rbi det klara vattnet</summary></entry><entry><title type="html">Avoid iframe navigation affecting browser history</title><link href="/tech/2021/12/21/indiepen-iframe-fix.html" rel="alternate" type="text/html" title="Avoid iframe navigation affecting browser history" /><published>2021-12-21T00:00:00+01:00</published><updated>2021-12-21T00:00:00+01:00</updated><id>/tech/2021/12/21/indiepen-iframe-fix</id><content type="html" xml:base="/tech/2021/12/21/indiepen-iframe-fix.html">&lt;p&gt;This blog uses
&lt;a href=&quot;/tech/2021/12/11/indiepen.html&quot;&gt;Indiepen for code examples&lt;/a&gt;.
It was working fine in Chrome,
but testing in Firefox showed something strange when navigating to &lt;a href=&quot;/tech/2021/12/01/moving-poetry.html&quot;&gt;this post&lt;/a&gt;:
clicking the back button didn‚Äôt seem to have any effect.
Not until after repeated clicks on the back button would the browser navigate back to a previous page.&lt;/p&gt;

&lt;p&gt;Turns out the embedded Indiepen iframe‚Äôs were to blame:
setting the iframe &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src&lt;/code&gt; attribute will add an entry to the browser history,
and that‚Äôs exactly what Indiepen does to show the rendered result of a code example.
Since that particular blog posts contains multiple embedded Indiepen iframe‚Äôs
it required multiple clicks on the browser back button, one for each embedded iframe.&lt;/p&gt;

&lt;p&gt;The solution is to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;frame&amp;gt;.contentWindow.location.replace(url)&lt;/code&gt;
instead of assigning directly to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;frame&amp;gt;.src = url&lt;/code&gt;.
I‚Äôve contributed &lt;a href=&quot;https://github.com/yetanother-blog/indiepen/pull/121&quot;&gt;a fix&lt;/a&gt;
which has been merged. üéâ&lt;/p&gt;</content><author><name>Samuel Gulliksson</name></author><category term="tech" /><category term="open-source" /><summary type="html">This blog uses Indiepen for code examples. It was working fine in Chrome, but testing in Firefox showed something strange when navigating to this post: clicking the back button didn‚Äôt seem to have any effect. Not until after repeated clicks on the back button would the browser navigate back to a previous page.</summary></entry><entry><title type="html">Preserving current page number with vscode-pdf</title><link href="/tech/2021/12/21/vscode-pdf.html" rel="alternate" type="text/html" title="Preserving current page number with vscode-pdf" /><published>2021-12-21T00:00:00+01:00</published><updated>2021-12-21T00:00:00+01:00</updated><id>/tech/2021/12/21/vscode-pdf</id><content type="html" xml:base="/tech/2021/12/21/vscode-pdf.html">&lt;p&gt;I‚Äôm using the VS Code extension
&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=tomoki1207.pdf&quot;&gt;vscode-pdf&lt;/a&gt;,
which under the hood uses
&lt;a href=&quot;https://mozilla.github.io/pdf.js/&quot;&gt;PDF.js&lt;/a&gt;
to render PDF files in a Webview within VS Code.
After loading, the extension watches the opened PDF file for changes
and if it detects any it reloads the file.
This is a great feature, except as reported in a
&lt;a href=&quot;https://github.com/tomoki1207/vscode-pdfviewer/issues/118&quot;&gt;Github issue&lt;/a&gt;
it causes the PDF view to jump to the top of the file on reload.
This is not so great if you‚Äôre automatically (re)generating the PDF
from for example a Latex document and want to quickly be able to see your changes
(which is exactly what I do when editing my fiction writing).&lt;/p&gt;

&lt;p&gt;The underlying
&lt;a href=&quot;https://github.com/mozilla/pdf.js/issues/6847#issuecomment-451761859&quot;&gt;PDF.js library already handles this&lt;/a&gt;,
but it relies on detecting the page was reloaded
which doesn‚Äôt look to be possible with the current VSCode Webview API.
Instead I figured it should be possible to grab the current page number,
reload the PDF file, and then reset the page number to the previous value.
Turns out that did work, and a
&lt;a href=&quot;https://github.com/tomoki1207/vscode-pdfviewer/pull/121&quot;&gt;fix&lt;/a&gt;
was released in version &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1.2.0&lt;/code&gt; of vscode-pdf.&lt;/p&gt;</content><author><name>Samuel Gulliksson</name></author><category term="tech" /><category term="open-source" /><summary type="html">I‚Äôm using the VS Code extension vscode-pdf, which under the hood uses PDF.js to render PDF files in a Webview within VS Code. After loading, the extension watches the opened PDF file for changes and if it detects any it reloads the file. This is a great feature, except as reported in a Github issue it causes the PDF view to jump to the top of the file on reload. This is not so great if you‚Äôre automatically (re)generating the PDF from for example a Latex document and want to quickly be able to see your changes (which is exactly what I do when editing my fiction writing).</summary></entry><entry><title type="html">Using Indiepen for embedded code examples</title><link href="/tech/2021/12/11/indiepen.html" rel="alternate" type="text/html" title="Using Indiepen for embedded code examples" /><published>2021-12-11T00:00:00+01:00</published><updated>2021-12-11T00:00:00+01:00</updated><id>/tech/2021/12/11/indiepen</id><content type="html" xml:base="/tech/2021/12/11/indiepen.html">&lt;p&gt;While documenting the
&lt;a href=&quot;/tech/2021/12/01/moving-poetry.html&quot;&gt;technical details of the ‚ÄúMoving poetry‚Äù project&lt;/a&gt;
I needed to include structured code examples that would also be rendered to show the described results.
Many hosted alternatives exist,
like &lt;a href=&quot;https://codepen.io/&quot;&gt;Codepen&lt;/a&gt; and &lt;a href=&quot;https://jsfiddle.net/&quot;&gt;JSFiddle&lt;/a&gt;,
but I wanted to host the files myself (to be able to version them same as the rest of this blog, etc.),
and not have to sign up for yet another service.&lt;/p&gt;

&lt;p&gt;That‚Äôs when I stumbled upon &lt;a href=&quot;https://indiepen.tech/&quot;&gt;Indiepen&lt;/a&gt;, which judging by its description
sounded like the perfect fit:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An independent and privacy-friendly solution to present your code examples to the people.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;After a quick look I found it to have a nice responsive design that looks great,
and the
&lt;a href=&quot;https://www.smashingmagazine.com/2021/08/cookieless-alternative-embed-html-css-js-code-examples/&quot;&gt;privacy-friendliness&lt;/a&gt;
is definitely something I‚Äôm all for!&lt;/p&gt;

&lt;p&gt;To use Indiepen, you simply need to host the code example files (HTML, CSS and JavaScript) somewhere
and provide the URL for Indiepen to present them together with a preview.
Only one problem: Indiepen is yet another hosted service that would introduce a dependency
as described in this &lt;a href=&quot;https://github.com/yetanother-blog/indiepen/issues/73&quot;&gt;Github issue&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Since Indiepen is open source with a permissive MIT license I decided to see if I could
make a build of it that could be self-hosted on this blog.
What I ended up with was something even better: a self-contained single HTML file that can be hosted and included anywhere,
removing the need to host the full web service of Indiepen.&lt;/p&gt;

&lt;p&gt;The necessary changes to build such a file are described
&lt;a href=&quot;https://github.com/yetanother-blog/indiepen/issues/73#issuecomment-970080949&quot;&gt;here&lt;/a&gt;,
and the setup for this blog now includes a copy of the
&lt;a href=&quot;https://github.com/zamzterz/zamzterz.github.io/blob/ac43caa9d88c51128ce8fcc4e03685535fe12765/code-examples/index.html&quot;&gt;Indiepen HTML file&lt;/a&gt;.
For example in the &lt;a href=&quot;/tech/2021/12/01/moving-poetry.html#opacity&quot;&gt;‚ÄúMoving poetry‚Äù post&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;iframe&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/opacity/basic&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;loading=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lazy&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;width=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;100%&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;height=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;250&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which renders as&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/opacity/basic&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;</content><author><name>Samuel Gulliksson</name></author><category term="tech" /><category term="open-source" /><summary type="html">While documenting the technical details of the ‚ÄúMoving poetry‚Äù project I needed to include structured code examples that would also be rendered to show the described results. Many hosted alternatives exist, like Codepen and JSFiddle, but I wanted to host the files myself (to be able to version them same as the rest of this blog, etc.), and not have to sign up for yet another service.</summary></entry><entry><title type="html">Moving poetry: Behind the scenes</title><link href="/tech/2021/12/01/moving-poetry.html" rel="alternate" type="text/html" title="Moving poetry: Behind the scenes" /><published>2021-12-01T00:00:00+01:00</published><updated>2021-12-01T00:00:00+01:00</updated><id>/tech/2021/12/01/moving-poetry</id><content type="html" xml:base="/tech/2021/12/01/moving-poetry.html">&lt;p&gt;The &lt;a href=&quot;/art/2021/11/10/moving-poetry-skogsvandring.html&quot;&gt;‚ÄúMoving poetry‚Äù project&lt;/a&gt; (Swedish only) was an exploration of text and technology.
This post describes some of the nifty Javascript (and CSS) tricks used to build it.&lt;/p&gt;

&lt;h2 id=&quot;web-animations-api&quot;&gt;Web Animations API&lt;/h2&gt;

&lt;p&gt;The entire project revolves around the ‚Äúnew‚Äù
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API&quot;&gt;Web Animations API&lt;/a&gt;,
available in modern browsers.
As the name suggests, the API makes it possible to animate DOM elements.
All properties of an element which can be animated are listed
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Animations are defined as a
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/KeyframeEffect&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;KeyframeEffect&lt;/code&gt;&lt;/a&gt;,
which consists of two parts: the
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats&quot;&gt;keyframes&lt;/a&gt;
describing the transitions of the animation,
and the options controlling the animations behavior.&lt;/p&gt;

&lt;p&gt;Below some examples are shown of what effects can be achieved when animating text elements
(all but the font size animation can of course be applied to any type of element).&lt;/p&gt;

&lt;h3 id=&quot;opacity&quot;&gt;Opacity&lt;/h3&gt;

&lt;p&gt;To make an element fade in and/or out, the opacity can be animated.&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/opacity/basic&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Notice the difference when pressing the cancel or finish button:
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Animation/cancel&quot;&gt;cancelling an animation&lt;/a&gt;
will remove any applied effects (returning the element to its starting state)
while
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Animation/finish&quot;&gt;finishing an animation&lt;/a&gt;
will set the current playback time to the end of the animation, which combined with the animation option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fill: 'forwards'&lt;/code&gt; puts the element in its final animated state.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Safari bug:&lt;/strong&gt; When animating the opacity it seems Safari does some strange things.
In below example (Safari only, reproducible at least in version &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;14.1.2&lt;/code&gt;, even though it seems like an
&lt;a href=&quot;https://stackoverflow.com/a/10935121&quot;&gt;old issue&lt;/a&gt;)
the top two lines fade out even though only the first line has its opacity animated.
The third line only stays visible since it has &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;opacity: 1&lt;/code&gt; applied by CSS.&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/opacity/safari-fix&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;font-size&quot;&gt;Font size&lt;/h3&gt;

&lt;p&gt;By animating the font size, text can be made to smoothly disappear or appear:&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/fontsize/basic&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;A small problem, illustrated by the red border in above example, is that the element itself is still rendered.
This can be fixed by using
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Animation.onfinish&lt;/code&gt;&lt;/a&gt;
to apply a CSS class hiding the element.&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/fontsize/improved&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;translation&quot;&gt;Translation&lt;/h3&gt;

&lt;p&gt;The movement of elements can also be animated.&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/translation/basic&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cubic-bezier&lt;/code&gt; function to control the timing of the animation
allows some really cool patterns to emerge while still using the same simple keyframes.
&lt;a href=&quot;https://css-tricks.com/advanced-css-animation-using-cubic-bezier/&quot;&gt;CSS-Tricks&lt;/a&gt;
has further examples with explanations.
To experiment with finding the perfect curve you can use &lt;a href=&quot;https://cubic-bezier.com&quot;&gt;cubic-bezier.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When there is a single keyframe specified, the browser will interpret it as the end state and
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats#implicit_tofrom_keyframes&quot;&gt;try to infer the starting state&lt;/a&gt;.
Hence, when chaining animations with more than one keyframe it‚Äôs necessary to make sure they are still starting from their current state.
This can be done using
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getComputedStyle&lt;/code&gt;&lt;/a&gt; to get the current transform of the element.
Otherwise the result will look very jumpy, as can be seen in the below example: the ‚ÄúRelative‚Äù text element moves along a smooth square (split into two separate animations),
while the ‚ÄúBasic‚Äù text elements jumps between positions.&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/translation/relative-chaining&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;rotation&quot;&gt;Rotation&lt;/h3&gt;

&lt;p&gt;Similarly, the rotation of elements can be animated.
By moving the
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;transform-origin&lt;/code&gt;&lt;/a&gt;,
the element can be rotated around different points.&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/rotation/basic&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;By combining animations more complex effects can be achieved.
In the following example an element containing a child element is rotated,
before the child element itself is transformed.&lt;/p&gt;
&lt;iframe src=&quot;/code-examples/index.html?url=/code-examples/2021-12-01-moving-poetry/rotation/complex&quot; loading=&quot;lazy&quot; width=&quot;100%&quot; height=&quot;250&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;responsiveness&quot;&gt;Responsiveness&lt;/h2&gt;

&lt;p&gt;To make sure animations are responsive, and working nicely on smaller screens as well, there are some tricks that can help:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Use relative length units for all the things, including animated translations. Especially if you‚Äôre using
&lt;a href=&quot;https://css-tricks.com/snippets/css/fluid-typography/&quot;&gt;fluid typography&lt;/a&gt; the text animations will scale nicely.&lt;/li&gt;
  &lt;li&gt;CSS functions and variables can be used when specifying the animation keyframes. It‚Äôs totally legal to specify something like
    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;translateX(calc(var(--font-size) * 5))&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;If you really need to customize the animations based on for example screen size,
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries&quot;&gt;media queries&lt;/a&gt; can be used in Javascript via
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia&quot;&gt;matchMedia&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Samuel Gulliksson</name></author><category term="tech" /><summary type="html">The ‚ÄúMoving poetry‚Äù project (Swedish only) was an exploration of text and technology. This post describes some of the nifty Javascript (and CSS) tricks used to build it.</summary></entry><entry><title type="html">Moving poetry: Skogsvandring</title><link href="/art/2021/11/10/moving-poetry-skogsvandring.html" rel="alternate" type="text/html" title="Moving poetry: Skogsvandring" /><published>2021-11-10T00:00:00+01:00</published><updated>2021-11-10T00:00:00+01:00</updated><id>/art/2021/11/10/moving-poetry-skogsvandring</id><content type="html" xml:base="/art/2021/11/10/moving-poetry-skogsvandring.html">&lt;p&gt;Saker som r√∂r sig i √∂gonvr√•n, uppst√•r och f√∂rsvinner - mystiskt och sp√§nnande.
Det finns ingen r√§tt v√§g, bara f√∂rslag p√• stigar genom bokst√§ver, ord och rader.
S√• g√• p√• uppt√§cktsf√§rd, precis som i skogen: &lt;a href=&quot;/art/moving-poetry&quot;&gt;Moving poetry: Skogsvandring&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;‚ÄúMoving poetry: Skogsvandring‚Äù utforskar dynamisk poesi i en lek med text och teknik f√∂r att skapa konst(igheter).
Omkastade rader, anagram och andra konstruktioner utmanar id√©n om att text beh√∂ver l√§sas enligt sin struktur p√• den tryckta sidan.
I sk√§rningspunkten mellan text och konst f√•r betraktaren ist√§llet sj√§lv v√§lja sin egen l√§sning.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;small&gt;
F√∂r b√§sta upplevelse anv√§nd en uppdaterad webbl√§sare och landskapsl√§ge p√• mindre enheter.
En beskrivning av tekniken som anv√§nts f√∂r att skapa detta finns
&lt;a href=&quot;/tech/2021/12/01/moving-poetry.html&quot;&gt;h√§r&lt;/a&gt; (p√• engelska).
&lt;/small&gt;&lt;/p&gt;</content><author><name>Samuel Gulliksson</name></author><category term="art" /><summary type="html">Saker som r√∂r sig i √∂gonvr√•n, uppst√•r och f√∂rsvinner - mystiskt och sp√§nnande. Det finns ingen r√§tt v√§g, bara f√∂rslag p√• stigar genom bokst√§ver, ord och rader. S√• g√• p√• uppt√§cktsf√§rd, precis som i skogen: Moving poetry: Skogsvandring</summary></entry><entry><title type="html">N√§r natten tynger</title><link href="/text/2021/09/15/n%C3%A4r-natten-tynger.html" rel="alternate" type="text/html" title="N√§r natten tynger" /><published>2021-09-15T00:00:00+02:00</published><updated>2021-09-15T00:00:00+02:00</updated><id>/text/2021/09/15/n%C3%A4r-natten-tynger</id><content type="html" xml:base="/text/2021/09/15/n%C3%A4r-natten-tynger.html">&lt;p&gt;N√§r natten tynger &lt;br /&gt;
l√§ttar m√∂rkret ankar. &lt;br /&gt;
En storm genom allt som √§r &lt;br /&gt;
jag sliter i alla trasiga tr√•dar &lt;br /&gt;
som h√•ller ihop mig.&lt;/p&gt;

&lt;p&gt;Tyngd av &lt;br /&gt;
√•nger och sten &lt;br /&gt;
√•nger och sten &lt;br /&gt;
√•nger och sten &lt;br /&gt;
√•ngesten. &lt;br /&gt;
Jag dras till djup &lt;br /&gt;
djupare &lt;br /&gt;
√§n Marianergraven.&lt;/p&gt;

&lt;p&gt;Men jag v√§nder om &lt;br /&gt;
till v√§rmen fr√•n din rygg. &lt;br /&gt;
I l√§ fr√•n striden &lt;br /&gt;
i mina s√∂mmar &lt;br /&gt;
spricker det upp till sol.&lt;/p&gt;</content><author><name>Samuel Gulliksson</name></author><category term="text" /><summary type="html">N√§r natten tynger l√§ttar m√∂rkret ankar. En storm genom allt som √§r jag sliter i alla trasiga tr√•dar som h√•ller ihop mig.</summary></entry></feed>